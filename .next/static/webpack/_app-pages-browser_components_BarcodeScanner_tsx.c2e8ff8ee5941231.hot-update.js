"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_components_BarcodeScanner_tsx",{

/***/ "(app-pages-browser)/./components/BarcodeScanner.tsx":
/*!***************************************!*\
  !*** ./components/BarcodeScanner.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ BarcodeScanner; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://127.0.0.1:8000\";\nconst FORMATS = [\n    \"ean_13\",\n    \"ean_8\",\n    \"upc_a\",\n    \"code_128\",\n    \"code_39\",\n    \"itf\"\n];\nfunction BarcodeScanner(param) {\n    let { onDetected, onClose } = param;\n    _s();\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const streamRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rafRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const detectorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (rafRef.current) cancelAnimationFrame(rafRef.current);\n        rafRef.current = null;\n        if (streamRef.current) {\n            streamRef.current.getTracks().forEach((t)=>t.stop());\n            streamRef.current = null;\n        }\n        if (videoRef.current) {\n            try {\n                videoRef.current.pause();\n            } catch (e) {}\n            // @ts-expect-error clear srcObject\n            try {\n                videoRef.current.srcObject = null;\n            } catch (e) {}\n        }\n    }, []);\n    const close = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        stop();\n        onClose();\n    }, [\n        onClose,\n        stop\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let cancelled = false;\n        (async ()=>{\n            try {\n                if (streamRef.current) return; // already started\n                const stream = await navigator.mediaDevices.getUserMedia({\n                    video: {\n                        facingMode: {\n                            ideal: \"environment\"\n                        }\n                    },\n                    audio: false\n                });\n                if (cancelled) {\n                    stream.getTracks().forEach((t)=>t.stop());\n                    return;\n                }\n                streamRef.current = stream;\n                const v = videoRef.current;\n                if (v) {\n                    // @ts-expect-error assign stream\n                    v.srcObject = stream;\n                    // wait metadata then play; ignore AbortError (Fast Refresh/new load)\n                    await new Promise((resolve)=>{\n                        if (v.readyState >= 2) resolve();\n                        else v.addEventListener(\"loadedmetadata\", ()=>resolve(), {\n                            once: true\n                        });\n                    });\n                    try {\n                        await v.play();\n                    } catch (err) {\n                        if (!(err && err.name === \"AbortError\")) {\n                            throw err;\n                        }\n                    }\n                }\n                if (\"BarcodeDetector\" in window) {\n                    detectorRef.current = new window.BarcodeDetector({\n                        formats: FORMATS\n                    });\n                    const tick = async ()=>{\n                        if (!videoRef.current || !detectorRef.current) return;\n                        try {\n                            const codes = await detectorRef.current.detect(videoRef.current);\n                            if (codes && codes.length > 0) {\n                                const value = codes[0].rawValue || \"\";\n                                if (value) {\n                                    if (navigator.vibrate) navigator.vibrate(50);\n                                    onDetected(value);\n                                    close();\n                                    return;\n                                }\n                            }\n                        } catch (e) {}\n                        rafRef.current = requestAnimationFrame(tick);\n                    };\n                    if (!rafRef.current) rafRef.current = requestAnimationFrame(tick);\n                }\n            } catch (e) {\n                console.error(e);\n                setError(\"カメラを起動できませんでした。画像から読み取りに切り替えます。\");\n            }\n        })();\n        return ()=>{\n            cancelled = true;\n            stop();\n        };\n    }, [\n        close,\n        stop\n    ]);\n    const onPickImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (ev)=>{\n        var _ev_target_files;\n        const f = (_ev_target_files = ev.target.files) === null || _ev_target_files === void 0 ? void 0 : _ev_target_files[0];\n        if (!f) return;\n        try {\n            // 事前処理: 画像をキャンバスに拡大描画し、グレースケール+コントラスト調整\n            try {\n                const bmp = await createImageBitmap(f);\n                const maxSide = Math.max(bmp.width, bmp.height);\n                const scale = maxSide < 900 ? Math.ceil(900 / maxSide) : 1;\n                const w = bmp.width * scale;\n                const h = bmp.height * scale;\n                const canvas = document.createElement(\"canvas\");\n                canvas.width = w;\n                canvas.height = h;\n                const ctx = canvas.getContext(\"2d\");\n                ctx.imageSmoothingEnabled = true;\n                ctx.filter = \"grayscale(100%) contrast(125%)\";\n                ctx.drawImage(bmp, 0, 0, w, h);\n                // BarcodeDetector でキャンバスから直接検出\n                if (\"BarcodeDetector\" in window) {\n                    try {\n                        const det = new window.BarcodeDetector({\n                            formats: FORMATS\n                        });\n                        const res = await det.detect(canvas);\n                        if (res && res.length > 0 && res[0].rawValue) {\n                            if (navigator.vibrate) navigator.vibrate(50);\n                            onDetected(res[0].rawValue);\n                            close();\n                            return;\n                        }\n                    } catch (e) {}\n                }\n                // ZXing でキャンバス画像（Blob URL）を使って検出\n                try {\n                    const { BrowserMultiFormatReader } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_zxing_browser_esm_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! @zxing/browser */ \"(app-pages-browser)/./node_modules/@zxing/browser/esm/index.js\"));\n                    const reader = new BrowserMultiFormatReader();\n                    const blob = await new Promise((resolve, reject)=>canvas.toBlob((b)=>b ? resolve(b) : reject(new Error(\"toBlob failed\")), \"image/png\"));\n                    const url = URL.createObjectURL(blob);\n                    try {\n                        var _result_getText;\n                        const result = await reader.decodeFromImageUrl(url);\n                        const val = result && (((_result_getText = result.getText) === null || _result_getText === void 0 ? void 0 : _result_getText.call(result)) || result.text);\n                        if (val) {\n                            if (navigator.vibrate) navigator.vibrate(50);\n                            onDetected(val);\n                            close();\n                            return;\n                        }\n                    } finally{\n                        URL.revokeObjectURL(url);\n                        reader.reset();\n                    }\n                } catch (e) {}\n            } catch (e) {}\n            if (\"BarcodeDetector\" in window) {\n                const img = await createImageBitmap(f);\n                const det = new window.BarcodeDetector({\n                    formats: FORMATS\n                });\n                const res = await det.detect(img);\n                if (res && res.length > 0 && res[0].rawValue) {\n                    if (navigator.vibrate) navigator.vibrate(50);\n                    onDetected(res[0].rawValue);\n                    close();\n                    return;\n                }\n            }\n            // Try ZXing (client) as additional fallback\n            try {\n                const { BrowserMultiFormatReader } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_zxing_browser_esm_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! @zxing/browser */ \"(app-pages-browser)/./node_modules/@zxing/browser/esm/index.js\"));\n                const reader = new BrowserMultiFormatReader();\n                const url = URL.createObjectURL(f);\n                try {\n                    var _result_getText1;\n                    const result = await reader.decodeFromImageUrl(url);\n                    const val = result && (((_result_getText1 = result.getText) === null || _result_getText1 === void 0 ? void 0 : _result_getText1.call(result)) || result.text);\n                    if (val) {\n                        if (navigator.vibrate) navigator.vibrate(50);\n                        onDetected(val);\n                        close();\n                        return;\n                    }\n                } finally{\n                    URL.revokeObjectURL(url);\n                    reader.reset();\n                }\n            } catch (e) {}\n            const fd = new FormData();\n            fd.append(\"file\", f);\n            const r = await fetch(\"\".concat(API_BASE, \"/api/scan\"), {\n                method: \"POST\",\n                body: fd\n            });\n            if (r.ok) {\n                const { code, codes } = await r.json();\n                const val = code || Array.isArray(codes) && codes[0];\n                if (val) {\n                    if (navigator.vibrate) navigator.vibrate(50);\n                    onDetected(String(val));\n                    close();\n                    return;\n                }\n            }\n            setError(\"画像からバーコードを読み取れませんでした\");\n        } catch (e) {\n            setError(\"画像の処理に失敗しました\");\n        }\n    }, [\n        close,\n        onDetected\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: overlayStyle,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: containerStyle,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                        marginBottom: 8\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                            children: \"バーコードを枠に合わせてください\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                            lineNumber: 152,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: close,\n                            children: \"閉じる\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                            lineNumber: 153,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                    lineNumber: 151,\n                    columnNumber: 9\n                }, this),\n                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        color: \"#c00\",\n                        marginBottom: 8\n                    },\n                    children: error\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                    lineNumber: 155,\n                    columnNumber: 19\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        position: \"relative\",\n                        width: \"100%\",\n                        aspectRatio: \"3/4\",\n                        background: \"#000\",\n                        borderRadius: 8,\n                        overflow: \"hidden\"\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                            ref: videoRef,\n                            playsInline: true,\n                            muted: true,\n                            style: {\n                                width: \"100%\",\n                                height: \"100%\",\n                                objectFit: \"cover\"\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                            lineNumber: 157,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: frameStyle\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                            lineNumber: 158,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                    lineNumber: 156,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        marginTop: 12\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        style: {\n                            display: \"inline-block\"\n                        },\n                        children: [\n                            \"画像から読み取る:\",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"file\",\n                                accept: \"image/*\",\n                                onChange: onPickImage,\n                                style: {\n                                    display: \"block\",\n                                    marginTop: 6\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                                lineNumber: 163,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                        lineNumber: 161,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n                    lineNumber: 160,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n            lineNumber: 150,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\jkhor\\\\Desktop\\\\Tech 0\\\\Step4PosアプリLv2\\\\pos-lv2\\\\frontend\\\\components\\\\BarcodeScanner.tsx\",\n        lineNumber: 149,\n        columnNumber: 5\n    }, this);\n}\n_s(BarcodeScanner, \"yhqgyz5NI3aFbX43vXKRH2gP+y0=\");\n_c = BarcodeScanner;\nconst overlayStyle = {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,0.5)\",\n    display: \"grid\",\n    placeItems: \"center\",\n    zIndex: 1000,\n    padding: 16\n};\nconst containerStyle = {\n    width: \"min(480px, 100%)\",\n    background: \"#fff\",\n    padding: 12,\n    borderRadius: 10\n};\nconst frameStyle = {\n    position: \"absolute\",\n    inset: \"20% 10%\",\n    border: \"2px solid rgba(255,255,255,0.9)\",\n    borderRadius: 8,\n    boxShadow: \"0 0 0 9999px rgba(0,0,0,0.25) inset\",\n    pointerEvents: \"none\"\n};\nvar _c;\n$RefreshReg$(_c, \"BarcodeScanner\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvQmFyY29kZVNjYW5uZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFaUU7QUFTakUsTUFBTUksV0FBV0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyx3QkFBd0IsSUFBSTtBQUN6RCxNQUFNQyxVQUFVO0lBQUM7SUFBUztJQUFRO0lBQVE7SUFBVztJQUFVO0NBQU07QUFFdEQsU0FBU0MsZUFBZSxLQUE4QjtRQUE5QixFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBUyxHQUE5Qjs7SUFDckMsTUFBTUMsV0FBV1YsNkNBQU1BLENBQTBCO0lBQ2pELE1BQU1XLFlBQVlYLDZDQUFNQSxDQUFxQjtJQUM3QyxNQUFNWSxTQUFTWiw2Q0FBTUEsQ0FBZ0I7SUFDckMsTUFBTWEsY0FBY2IsNkNBQU1BLENBQWE7SUFDdkMsTUFBTSxDQUFDYyxPQUFPQyxTQUFTLEdBQUdkLCtDQUFRQSxDQUFDO0lBRW5DLE1BQU1lLE9BQU9sQixrREFBV0EsQ0FBQztRQUN2QixJQUFJYyxPQUFPSyxPQUFPLEVBQUVDLHFCQUFxQk4sT0FBT0ssT0FBTztRQUN2REwsT0FBT0ssT0FBTyxHQUFHO1FBQ2pCLElBQUlOLFVBQVVNLE9BQU8sRUFBRTtZQUNyQk4sVUFBVU0sT0FBTyxDQUFDRSxTQUFTLEdBQUdDLE9BQU8sQ0FBQyxDQUFDQyxJQUFNQSxFQUFFTCxJQUFJO1lBQ25ETCxVQUFVTSxPQUFPLEdBQUc7UUFDdEI7UUFDQSxJQUFJUCxTQUFTTyxPQUFPLEVBQUU7WUFDcEIsSUFBSTtnQkFBRVAsU0FBU08sT0FBTyxDQUFDSyxLQUFLO1lBQUksRUFBRSxVQUFNLENBQUM7WUFDekMsbUNBQW1DO1lBQ25DLElBQUk7Z0JBQUVaLFNBQVNPLE9BQU8sQ0FBQ00sU0FBUyxHQUFHO1lBQU0sRUFBRSxVQUFNLENBQUM7UUFDcEQ7SUFDRixHQUFHLEVBQUU7SUFFTCxNQUFNQyxRQUFRMUIsa0RBQVdBLENBQUM7UUFBUWtCO1FBQVFQO0lBQVcs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O0FBQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9CYXJjb2RlU2Nhbm5lci50c3g/Yzc4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG50eXBlIFByb3BzID0ge1xuICBvbkRldGVjdGVkOiAoY29kZTogc3RyaW5nKSA9PiB2b2lkO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufTtcblxuZGVjbGFyZSBnbG9iYWwgeyBpbnRlcmZhY2UgV2luZG93IHsgQmFyY29kZURldGVjdG9yPzogYW55IH0gfVxuXG5jb25zdCBBUElfQkFTRSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9CQVNFX1VSTCB8fCBcImh0dHA6Ly8xMjcuMC4wLjE6ODAwMFwiO1xuY29uc3QgRk9STUFUUyA9IFtcImVhbl8xM1wiLFwiZWFuXzhcIixcInVwY19hXCIsXCJjb2RlXzEyOFwiLFwiY29kZV8zOVwiLFwiaXRmXCJdO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCYXJjb2RlU2Nhbm5lcih7IG9uRGV0ZWN0ZWQsIG9uQ2xvc2UgfTogUHJvcHMpOiBKU1guRWxlbWVudCB7XG4gIGNvbnN0IHZpZGVvUmVmID0gdXNlUmVmPEhUTUxWaWRlb0VsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3Qgc3RyZWFtUmVmID0gdXNlUmVmPE1lZGlhU3RyZWFtIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHJhZlJlZiA9IHVzZVJlZjxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgZGV0ZWN0b3JSZWYgPSB1c2VSZWY8YW55IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoXCJcIik7XG5cbiAgY29uc3Qgc3RvcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocmFmUmVmLmN1cnJlbnQpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZlJlZi5jdXJyZW50KTtcbiAgICByYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgaWYgKHN0cmVhbVJlZi5jdXJyZW50KSB7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudC5nZXRUcmFja3MoKS5mb3JFYWNoKCh0KSA9PiB0LnN0b3AoKSk7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh2aWRlb1JlZi5jdXJyZW50KSB7XG4gICAgICB0cnkgeyB2aWRlb1JlZi5jdXJyZW50LnBhdXNlKCk7IH0gY2F0Y2gge31cbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgY2xlYXIgc3JjT2JqZWN0XG4gICAgICB0cnkgeyB2aWRlb1JlZi5jdXJyZW50LnNyY09iamVjdCA9IG51bGw7IH0gY2F0Y2gge31cbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBjbG9zZSA9IHVzZUNhbGxiYWNrKCgpID0+IHsgc3RvcCgpOyBvbkNsb3NlKCk7IH0sIFtvbkNsb3NlLCBzdG9wXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzdHJlYW1SZWYuY3VycmVudCkgcmV0dXJuOyAvLyBhbHJlYWR5IHN0YXJ0ZWRcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogeyBmYWNpbmdNb2RlOiB7IGlkZWFsOiBcImVudmlyb25tZW50XCIgfSB9LCBhdWRpbzogZmFsc2UgfSk7XG4gICAgICAgIGlmIChjYW5jZWxsZWQpIHsgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godCA9PiB0LnN0b3AoKSk7IHJldHVybjsgfVxuICAgICAgICBzdHJlYW1SZWYuY3VycmVudCA9IHN0cmVhbTtcbiAgICAgICAgY29uc3QgdiA9IHZpZGVvUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBhc3NpZ24gc3RyZWFtXG4gICAgICAgICAgdi5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgICAgICAgLy8gd2FpdCBtZXRhZGF0YSB0aGVuIHBsYXk7IGlnbm9yZSBBYm9ydEVycm9yIChGYXN0IFJlZnJlc2gvbmV3IGxvYWQpXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICgodiBhcyBhbnkpLnJlYWR5U3RhdGUgPj0gMikgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgZWxzZSB2LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4gcmVzb2x2ZSgpLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdHJ5IHsgYXdhaXQgdi5wbGF5KCk7IH0gY2F0Y2ggKGVycjogYW55KSB7IGlmICghKGVyciAmJiBlcnIubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSkgeyB0aHJvdyBlcnI7IH0gfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcIkJhcmNvZGVEZXRlY3RvclwiIGluIHdpbmRvdykge1xuICAgICAgICAgIGRldGVjdG9yUmVmLmN1cnJlbnQgPSBuZXcgKHdpbmRvdyBhcyBhbnkpLkJhcmNvZGVEZXRlY3Rvcih7IGZvcm1hdHM6IEZPUk1BVFMgfSk7XG4gICAgICAgICAgY29uc3QgdGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdmlkZW9SZWYuY3VycmVudCB8fCAhZGV0ZWN0b3JSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgY29kZXMgPSBhd2FpdCBkZXRlY3RvclJlZi5jdXJyZW50LmRldGVjdCh2aWRlb1JlZi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgaWYgKGNvZGVzICYmIGNvZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZTogc3RyaW5nID0gY29kZXNbMF0ucmF3VmFsdWUgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHsgaWYgKG5hdmlnYXRvci52aWJyYXRlKSBuYXZpZ2F0b3IudmlicmF0ZSg1MCk7IG9uRGV0ZWN0ZWQodmFsdWUpOyBjbG9zZSgpOyByZXR1cm47IH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICAgICAgICByYWZSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmICghcmFmUmVmLmN1cnJlbnQpIHJhZlJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIHNldEVycm9yKFwi44Kr44Oh44Op44KS6LW35YuV44Gn44GN44G+44Gb44KT44Gn44GX44Gf44CC55S75YOP44GL44KJ6Kqt44G/5Y+W44KK44Gr5YiH44KK5pu/44GI44G+44GZ44CCXCIpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgY2FuY2VsbGVkID0gdHJ1ZTsgc3RvcCgpOyB9O1xuICB9LCBbY2xvc2UsIHN0b3BdKTtcblxuICBjb25zdCBvblBpY2tJbWFnZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChldjogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmID0gZXYudGFyZ2V0LmZpbGVzPy5bMF07XG4gICAgaWYgKCFmKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS6i+WJjeWHpueQhjog55S75YOP44KS44Kt44Oj44Oz44OQ44K544Gr5ouh5aSn5o+P55S744GX44CB44Kw44Os44O844K544Kx44O844OrK+OCs+ODs+ODiOODqeOCueODiOiqv+aVtFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYm1wID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoZik7XG4gICAgICAgIGNvbnN0IG1heFNpZGUgPSBNYXRoLm1heChibXAud2lkdGgsIGJtcC5oZWlnaHQpO1xuICAgICAgICBjb25zdCBzY2FsZSA9IG1heFNpZGUgPCA5MDAgPyBNYXRoLmNlaWwoOTAwIC8gbWF4U2lkZSkgOiAxO1xuICAgICAgICBjb25zdCB3ID0gYm1wLndpZHRoICogc2NhbGU7XG4gICAgICAgIGNvbnN0IGggPSBibXAuaGVpZ2h0ICogc2NhbGU7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHc7IGNhbnZhcy5oZWlnaHQgPSBoO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpITtcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIChjdHggYXMgYW55KS5maWx0ZXIgPSBcImdyYXlzY2FsZSgxMDAlKSBjb250cmFzdCgxMjUlKVwiO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGJtcCwgMCwgMCwgdywgaCk7XG4gICAgICAgIC8vIEJhcmNvZGVEZXRlY3RvciDjgafjgq3jg6Pjg7Pjg5DjgrnjgYvjgonnm7TmjqXmpJzlh7pcbiAgICAgICAgaWYgKFwiQmFyY29kZURldGVjdG9yXCIgaW4gd2luZG93KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRldCA9IG5ldyAod2luZG93IGFzIGFueSkuQmFyY29kZURldGVjdG9yKHsgZm9ybWF0czogRk9STUFUUyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGRldC5kZXRlY3QoY2FudmFzIGFzIHVua25vd24gYXMgQ2FudmFzSW1hZ2VTb3VyY2UpO1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMubGVuZ3RoID4gMCAmJiByZXNbMF0ucmF3VmFsdWUpIHsgaWYgKG5hdmlnYXRvci52aWJyYXRlKSBuYXZpZ2F0b3IudmlicmF0ZSg1MCk7IG9uRGV0ZWN0ZWQocmVzWzBdLnJhd1ZhbHVlIGFzIHN0cmluZyk7IGNsb3NlKCk7IHJldHVybjsgfVxuICAgICAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgICB9XG4gICAgICAgIC8vIFpYaW5nIOOBp+OCreODo+ODs+ODkOOCueeUu+WDj++8iEJsb2IgVVJM77yJ44KS5L2/44Gj44Gm5qSc5Ye6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBCcm93c2VyTXVsdGlGb3JtYXRSZWFkZXIgfSA9IGF3YWl0IGltcG9ydChcIkB6eGluZy9icm93c2VyXCIpO1xuICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBCcm93c2VyTXVsdGlGb3JtYXRSZWFkZXIoKTtcbiAgICAgICAgICBjb25zdCBibG9iOiBCbG9iID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gY2FudmFzLnRvQmxvYihiID0+IGIgPyByZXNvbHZlKGIpIDogcmVqZWN0KG5ldyBFcnJvcihcInRvQmxvYiBmYWlsZWRcIikpLCBcImltYWdlL3BuZ1wiKSk7XG4gICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBhbnkgPSBhd2FpdCByZWFkZXIuZGVjb2RlRnJvbUltYWdlVXJsKHVybCk7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSAocmVzdWx0ICYmIChyZXN1bHQuZ2V0VGV4dD8uKCkgfHwgcmVzdWx0LnRleHQpKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAodmFsKSB7IGlmIChuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUoNTApOyBvbkRldGVjdGVkKHZhbCk7IGNsb3NlKCk7IHJldHVybjsgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgICByZWFkZXIucmVzZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICBpZiAoXCJCYXJjb2RlRGV0ZWN0b3JcIiBpbiB3aW5kb3cpIHtcbiAgICAgICAgY29uc3QgaW1nID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoZik7XG4gICAgICAgIGNvbnN0IGRldCA9IG5ldyAod2luZG93IGFzIGFueSkuQmFyY29kZURldGVjdG9yKHsgZm9ybWF0czogRk9STUFUUyB9KTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZGV0LmRldGVjdChpbWcgYXMgdW5rbm93biBhcyBDYW52YXNJbWFnZVNvdXJjZSk7XG4gICAgICAgIGlmIChyZXMgJiYgcmVzLmxlbmd0aCA+IDAgJiYgcmVzWzBdLnJhd1ZhbHVlKSB7IGlmIChuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUoNTApOyBvbkRldGVjdGVkKHJlc1swXS5yYXdWYWx1ZSBhcyBzdHJpbmcpOyBjbG9zZSgpOyByZXR1cm47IH1cbiAgICAgIH1cbiAgICAgIC8vIFRyeSBaWGluZyAoY2xpZW50KSBhcyBhZGRpdGlvbmFsIGZhbGxiYWNrXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IEJyb3dzZXJNdWx0aUZvcm1hdFJlYWRlciB9ID0gYXdhaXQgaW1wb3J0KFwiQHp4aW5nL2Jyb3dzZXJcIik7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBCcm93c2VyTXVsdGlGb3JtYXRSZWFkZXIoKTtcbiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQ6IGFueSA9IGF3YWl0IHJlYWRlci5kZWNvZGVGcm9tSW1hZ2VVcmwodXJsKTtcbiAgICAgICAgICBjb25zdCB2YWwgPSAocmVzdWx0ICYmIChyZXN1bHQuZ2V0VGV4dD8uKCkgfHwgcmVzdWx0LnRleHQpKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHZhbCkgeyBpZiAobmF2aWdhdG9yLnZpYnJhdGUpIG5hdmlnYXRvci52aWJyYXRlKDUwKTsgb25EZXRlY3RlZCh2YWwpOyBjbG9zZSgpOyByZXR1cm47IH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgcmVhZGVyLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGEoKTsgZmQuYXBwZW5kKFwiZmlsZVwiLCBmKTtcbiAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vYXBpL3NjYW5gLCB7IG1ldGhvZDogXCJQT1NUXCIsIGJvZHk6IGZkIH0pO1xuICAgICAgaWYgKHIub2spIHsgY29uc3QgeyBjb2RlLCBjb2RlcyB9ID0gYXdhaXQgci5qc29uKCk7IGNvbnN0IHZhbCA9IGNvZGUgfHwgKEFycmF5LmlzQXJyYXkoY29kZXMpICYmIGNvZGVzWzBdKTsgaWYgKHZhbCkgeyBpZiAobmF2aWdhdG9yLnZpYnJhdGUpIG5hdmlnYXRvci52aWJyYXRlKDUwKTsgb25EZXRlY3RlZChTdHJpbmcodmFsKSk7IGNsb3NlKCk7IHJldHVybjsgfSB9XG4gICAgICBzZXRFcnJvcihcIueUu+WDj+OBi+OCieODkOODvOOCs+ODvOODieOCkuiqreOBv+WPluOCjOOBvuOBm+OCk+OBp+OBl+OBn1wiKTtcbiAgICB9IGNhdGNoIHsgc2V0RXJyb3IoXCLnlLvlg4/jga7lh6bnkIbjgavlpLHmlZfjgZfjgb7jgZfjgZ9cIik7IH1cbiAgfSwgW2Nsb3NlLCBvbkRldGVjdGVkXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXtvdmVybGF5U3R5bGV9PlxuICAgICAgPGRpdiBzdHlsZT17Y29udGFpbmVyU3R5bGV9PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwiZmxleFwiLCBqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1iZXR3ZWVuXCIsIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsIG1hcmdpbkJvdHRvbTogOCB9fT5cbiAgICAgICAgICA8c3Ryb25nPuODkOODvOOCs+ODvOODieOCkuaeoOOBq+WQiOOCj+OBm+OBpuOBj+OBoOOBleOBhDwvc3Ryb25nPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17Y2xvc2V9PumWieOBmOOCizwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2Vycm9yICYmIDxkaXYgc3R5bGU9e3sgY29sb3I6IFwiI2MwMFwiLCBtYXJnaW5Cb3R0b206IDggfX0+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCB3aWR0aDogXCIxMDAlXCIsIGFzcGVjdFJhdGlvOiBcIjMvNFwiLCBiYWNrZ3JvdW5kOiBcIiMwMDBcIiwgYm9yZGVyUmFkaXVzOiA4LCBvdmVyZmxvdzogXCJoaWRkZW5cIiB9fT5cbiAgICAgICAgICA8dmlkZW8gcmVmPXt2aWRlb1JlZn0gcGxheXNJbmxpbmUgbXV0ZWQgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBvYmplY3RGaXQ6IFwiY292ZXJcIiB9fSAvPlxuICAgICAgICAgIDxkaXYgc3R5bGU9e2ZyYW1lU3R5bGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTIgfX0+XG4gICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIgfX0+XG4gICAgICAgICAgICDnlLvlg4/jgYvjgonoqq3jgb/lj5bjgos6XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgb25DaGFuZ2U9e29uUGlja0ltYWdlfSBzdHlsZT17eyBkaXNwbGF5OiBcImJsb2NrXCIsIG1hcmdpblRvcDogNiB9fSAvPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IG92ZXJsYXlTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHsgcG9zaXRpb246IFwiZml4ZWRcIiwgaW5zZXQ6IDAsIGJhY2tncm91bmQ6IFwicmdiYSgwLDAsMCwwLjUpXCIsIGRpc3BsYXk6IFwiZ3JpZFwiLCBwbGFjZUl0ZW1zOiBcImNlbnRlclwiLCB6SW5kZXg6IDEwMDAsIHBhZGRpbmc6IDE2IH07XG5jb25zdCBjb250YWluZXJTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHsgd2lkdGg6IFwibWluKDQ4MHB4LCAxMDAlKVwiLCBiYWNrZ3JvdW5kOiBcIiNmZmZcIiwgcGFkZGluZzogMTIsIGJvcmRlclJhZGl1czogMTAgfTtcbmNvbnN0IGZyYW1lU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIGluc2V0OiBcIjIwJSAxMCVcIiwgYm9yZGVyOiBcIjJweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuOSlcIiwgYm9yZGVyUmFkaXVzOiA4LCBib3hTaGFkb3c6IFwiMCAwIDAgOTk5OXB4IHJnYmEoMCwwLDAsMC4yNSkgaW5zZXRcIiwgcG9pbnRlckV2ZW50czogXCJub25lXCIgfTtcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiQVBJX0JBU0UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX0JBU0VfVVJMIiwiRk9STUFUUyIsIkJhcmNvZGVTY2FubmVyIiwib25EZXRlY3RlZCIsIm9uQ2xvc2UiLCJ2aWRlb1JlZiIsInN0cmVhbVJlZiIsInJhZlJlZiIsImRldGVjdG9yUmVmIiwiZXJyb3IiLCJzZXRFcnJvciIsInN0b3AiLCJjdXJyZW50IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJnZXRUcmFja3MiLCJmb3JFYWNoIiwidCIsInBhdXNlIiwic3JjT2JqZWN0IiwiY2xvc2UiLCJjYW5jZWxsZWQiLCJzdHJlYW0iLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJ2aWRlbyIsImZhY2luZ01vZGUiLCJpZGVhbCIsImF1ZGlvIiwidiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwicGxheSIsImVyciIsIm5hbWUiLCJ3aW5kb3ciLCJCYXJjb2RlRGV0ZWN0b3IiLCJmb3JtYXRzIiwidGljayIsImNvZGVzIiwiZGV0ZWN0IiwibGVuZ3RoIiwidmFsdWUiLCJyYXdWYWx1ZSIsInZpYnJhdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJlIiwiY29uc29sZSIsIm9uUGlja0ltYWdlIiwiZXYiLCJmIiwidGFyZ2V0IiwiZmlsZXMiLCJibXAiLCJjcmVhdGVJbWFnZUJpdG1hcCIsIm1heFNpZGUiLCJNYXRoIiwibWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZSIsImNlaWwiLCJ3IiwiaCIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJmaWx0ZXIiLCJkcmF3SW1hZ2UiLCJkZXQiLCJyZXMiLCJCcm93c2VyTXVsdGlGb3JtYXRSZWFkZXIiLCJyZWFkZXIiLCJibG9iIiwicmVqZWN0IiwidG9CbG9iIiwiYiIsIkVycm9yIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmVzdWx0IiwiZGVjb2RlRnJvbUltYWdlVXJsIiwidmFsIiwiZ2V0VGV4dCIsInRleHQiLCJyZXZva2VPYmplY3RVUkwiLCJyZXNldCIsImltZyIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJyIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5Iiwib2siLCJjb2RlIiwianNvbiIsIkFycmF5IiwiaXNBcnJheSIsIlN0cmluZyIsImRpdiIsInN0eWxlIiwib3ZlcmxheVN0eWxlIiwiY29udGFpbmVyU3R5bGUiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwibWFyZ2luQm90dG9tIiwic3Ryb25nIiwiYnV0dG9uIiwib25DbGljayIsImNvbG9yIiwicG9zaXRpb24iLCJhc3BlY3RSYXRpbyIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJvdmVyZmxvdyIsInJlZiIsInBsYXlzSW5saW5lIiwibXV0ZWQiLCJvYmplY3RGaXQiLCJmcmFtZVN0eWxlIiwibWFyZ2luVG9wIiwibGFiZWwiLCJpbnB1dCIsInR5cGUiLCJhY2NlcHQiLCJvbkNoYW5nZSIsImluc2V0IiwicGxhY2VJdGVtcyIsInpJbmRleCIsInBhZGRpbmciLCJib3JkZXIiLCJib3hTaGFkb3ciLCJwb2ludGVyRXZlbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/BarcodeScanner.tsx\n"));

/***/ })

});